<%- include('../Partials/userHeader')  -%>


    <main class="main">
        <section class="pt-100 pb-100">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-lg-3"></div>
                            <div class="col-lg-6">
                                <div class="login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5">
                                    <div class="padding_eight_all bg-white">
                                        <div class="heading_s1">
                                            <h3 class="mb-30">Reset Password</h3>
                                        </div>

                                        <form method="post" action="/resetUserPassword">
                                                <input type="text" name="email" value="<%= email %>" style="display: none;">
                                            <div class="form-group">
                                                <input type="password" id="resetPassword" name="resetPassword" placeholder="New password" required="true">
                                                <div class="text-danger" id="validatepassword" style="display: none;">Password must be minimum 6 characters</div>
                                            </div>

                                            <div class="form-group">
                                                <input type="password" id="CResetPassword" name="CResetPassword" placeholder="Confirm password" required="true">
                                                <div class="text-danger" id="checkPasswordMatch" style="display: none;">Password doesn't match</div>
                                            </div> 
                                            <div class="form-group" style="display: flex; justify-content: center;">
                                                <button type="submit" id="loginButton" class="btn btn-fill-out btn-block hover-up" name="login" style="width: 300px;">Send OTP</button>
                                            </div>
                                        </form> 
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>


    <script>

        document.addEventListener('DOMContentLoaded', function () {
            document.querySelector('form[action="/resetUserPassword"]').addEventListener('submit', function (event) {
                const password = document.getElementById('resetPassword').value;
                const confirmPassword = document.getElementById('CResetPassword').value;
    
                if (password.trim() === "" || !passwordValidation(password)) {
                    document.getElementById('validatepassword').style.display = 'block';
                    event.preventDefault();
                } else {
                    document.getElementById('validatepassword').style.display = 'none';
                }
    
                if (password !== confirmPassword) {
                    document.getElementById('checkPasswordMatch').style.display = 'block';
                    event.preventDefault();
                } else {
                    document.getElementById('checkPasswordMatch').style.display = 'none';
                }
    
            });
        });
    
    function passwordValidation(password){
        const pattern = /^.{6,}$/
        return pattern.test(password)
    }
    
    </script>

<%- include('../Partials/userFooter')  -%>
